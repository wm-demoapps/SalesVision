{
  "markup" : "%3Cwm-prefab-container+name%3D%22prefab_container_map%22%3E%0A++++%3Cwm-container+name%3D%22mapContainer%22+class%3D%22map-container%22+style%3D%22height%3A+400px%22%3E%3C%2Fwm-container%3E%0A++++%3Cwm-spinner+show%3D%22bind%3AisMapLoading%22+name%3D%22spinner2%22+type%3D%22icon%22+deferload%3D%22false%22+animation%3D%22spin%22%3E%3C%2Fwm-spinner%3E%0A%3C%2Fwm-prefab-container%3E",
  "script" : "%2F%2F+Google+Map+Service+Objects%0Avar+trafficLayer%2C%0A++++transitLayer%2C%0A++++directionsService%2C%0A++++directionsDisplay%2C%0A++++heatMap%3B%0A%0A%2F%2F+Map+options%0Avar+defaultCenter+%3D+%7B%0A++++++++lat%3A+0%2C%0A++++++++lng%3A+0%0A++++%7D%2C%0A++++latSum+%3D+0%2C%0A++++lngSum+%3D+0%2C%0A++++invalidLatLngCount+%3D+0%2C%0A++++mapBounds+%3D+false%2C%0A++++_refreshMap%2C%0A++++_updateDirectionsMap%2C%0A++++_buildMarkersMap%2C%0A++++_buildHeatMap%2C%0A++++_checkMapStatus%2C%0A++++customMarkers+%3D+%5B%5D%2C%0A++++infoWindow%3B%0A%0APrefab.isMapLoading+%3D+false%3B%0APrefab.maps+%3D+%5B%5D%3B%0APrefab.heatMapData+%3D+%5B%5D%3B%0APrefab.directionsData+%3D+%5B%5D%3B%0APrefab.markersData+%3D+%5B%5D%3B%0A%0A%2F*%0A+*+This+function+will+be+invoked+when+any+of+this+prefab%27s+property+is+changed%0A+*+%40key%3A+property+name%0A+*+%40newVal%3A+new+value+of+the+property%0A+*+%40oldVal%3A+old+value+of+the+property%0A+*%2F%0APrefab.onPropertyChange+%3D+function+%28key%2C+newVal%2C+oldVal%29+%7B%0A++++handlePropertyChangeInStudioMode%28key%2C+newVal%2C+oldVal%29%3B%0A++++if+%28typeof+google+%3D%3D%3D+%27undefined%27%29+%7B%0A++++++++return%3B%0A++++%7D%0A++++switch+%28key%29+%7B%0A++++case+%27maptype%27%3A%0A++++++++onLocationsChange%28newVal%2C+Prefab.locations%29%3B%0A++++++++break%3B%0A++++case+%27locations%27%3A%0A++++++++onLocationsChange%28Prefab.maptype%2C+newVal%29%3B%0A++++++++break%3B%0A++++case+%27lat%27%3A%0A++++case+%27lng%27%3A%0A++++++++onLocationsChange%28Prefab.maptype%2C+Prefab.locations%29%3B%0A++++++++break%3B%0A++++case+%27markertype%27%3A%0A++++case+%27address%27%3A%0A++++case+%27icon%27%3A%0A++++case+%27shade%27%3A%0A++++case+%27radius%27%3A%0A++++case+%27draggable%27%3A%0A++++++++_buildMarkersMap%28Prefab.locations%29%3B%0A++++++++break%3B%0A++++case+%27gradient%27%3A%0A++++case+%27opacity%27%3A%0A++++case+%27pixeldensity%27%3A%0A++++++++handleHeatMapPropChanges%28key%2C+newVal%29%3B%0A++++++++break%3B%0A++++case+%27origin%27%3A%0A++++case+%27destination%27%3A%0A++++case+%27waypoints%27%3A%0A++++case+%27travelmode%27%3A%0A++++++++if+%28Prefab.maptype+%3D%3D%3D+%27Route%27%29+%7B%0A++++++++++++_updateDirectionsMap%28%29%3B%0A++++++++%7D%0A++++++++break%3B%0A++++case+%27trafficlayer%27%3A%0A++++++++if+%28Prefab.maps.length%29+%7B%0A++++++++++++addOrRemoveTrafficLayer%28Prefab.maps%5B0%5D%2C+newVal%29%3B%0A++++++++%7D%0A++++++++break%3B%0A++++case+%27transitlayer%27%3A%0A++++++++if+%28Prefab.maps.length%29+%7B%0A++++++++++++addOrRemoveTransitLayer%28Prefab.maps%5B0%5D%2C+newVal%29%3B%0A++++++++%7D%0A++++++++break%3B%0A++++case+%27zoom%27%3A%0A++++++++if+%28Prefab.maps.length%29+%7B%0A++++++++++++Prefab.maps%5B0%5D.setZoom%28%28isNaN%28newVal%29+%7C%7C+newVal+%3C+2%29+%3F+2+%3A+newVal%29%3B%0A++++++++%7D%0A++++++++break%3B%0A++++case+%27viewtype%27%3A%0A++++++++if+%28Prefab.maps.length%29+%7B%0A++++++++++++Prefab.maps%5B0%5D.setMapTypeId%28newVal.toUpperCase%28%29%29%3B%0A++++++++%7D%0A++++++++break%3B%0A++++case+%27zoomcontroloptions%27%3A%0A++++case+%27streetviewcontroloptions%27%3A%0A++++++++if+%28Prefab.maps.length%29+%7B%0A++++++++++++setControlsPosition%28Prefab.maps%5B0%5D%2C+key%2C+newVal%29%3B%0A++++++++%7D%0A++++++++break%3B%0A++++%7D%0A%7D%3B%0A%0A%0Afunction+handlePropertyChangeInStudioMode%28key%2C+newVal%2C+oldVal%29+%7B%0A++++if+%28%21Prefab.isStudioMode+%7C%7C+%21Prefab.widgetProps%29+%7B%0A++++++++return%3B%0A++++%7D%0A++++switch+%28key%29+%7B%0A++++case+%27maptype%27%3A%0A++++++++var+commonProps+%3D+%5B%27name%27%2C+%27tabindex%27%2C+%27apikey%27%2C+%27maptype%27%2C+%27zoom%27%2C+%27height%27%2C+%27width%27%2C+%27show%27%2C+%27animation%27%2C+%27onLoad%27%2C+%27onDestroy%27%2C+%27accessroles%27%2C+%27class%27%2C+%27margin%27%2C+%27active%27%2C+%27debugurl%27%2C+%27showindevice%27%2C+%27zoomcontroloptions%27%2C+%27streetviewcontroloptions%27%5D%3B%0A%0A++++++++if+%28newVal+%3D%3D%3D+%27Markers%27%29+%7B%0A++++++++++++var+mapTypeProps+%3D+%5B%27onMarkerclick%27%2C+%27onMarkerhover%27%2C+%27onMarkerdragend%27%2C+%27onClick%27%2C+%27radius%27%2C+%27shade%27%2C+%27info%27%2C+%27icon%27%2C+%27markertype%27%2C+%27locations%27%2C+%27lat%27%2C+%27lng%27%2C+%27viewtype%27%2C+%27draggable%27%5D%3B%0A++++++++%7D+else+if+%28newVal+%3D%3D%3D+%27Heatmap%27%29+%7B%0A++++++++++++var+mapTypeProps+%3D+%5B%27locations%27%2C+%27lat%27%2C+%27lng%27%2C+%27gradient%27%2C+%27pixeldensity%27%2C+%27opacity%27%2C+%27viewtype%27%5D%3B%0A++++++++%7D+else+if+%28newVal+%3D%3D%3D+%27Route%27%29+%7B%0A++++++++++++var+mapTypeProps+%3D+%5B%27origin%27%2C+%27destination%27%2C+%27trafficlayer%27%2C+%27transitlayer%27%2C+%27travelmode%27%2C+%27waypoints%27%2C+%27stopover%27%2C+%27viewtype%27%5D%3B%0A++++++++%7D+else+%7B%0A++++++++++++var+mapTypeProps+%3D+%5B%5D%3B%0A++++++++%7D%0A%0A++++++++_.forEach%28Prefab.widgetProps%2C+function+%28property%2C+key%29+%7B%0A++++++++++++if+%28_.includes%28mapTypeProps%2C+key%29%29+%7B%0A++++++++++++++++Prefab.widgetProps%5Bkey%5D.show+%3D+true%3B%0A++++++++++++%7D+else+if+%28%21_.includes%28commonProps%2C+key%29%29+%7B%0A++++++++++++++++Prefab.widgetProps%5Bkey%5D.show+%3D+false%3B%0A++++++++++++%7D%0A++++++++%7D%29%3B%0A%0A%0A++++++++if+%28newVal+%3D%3D%3D+%27Markers%27%29+%7B%0A++++++++++++Prefab.widgetProps.lat.displayName+%3D+%27Marker+Latitude%27%3B%0A++++++++++++Prefab.widgetProps.lng.displayName+%3D+%27Marker+Longitude%27%3B%0A++++++++++++onMarkerTypeChangeInStudioMode%28Prefab.markertype%29%3B%0A++++++++%7D+else+if+%28newVal+%3D%3D%3D+%27Heatmap%27%29+%7B%0A++++++++++++Prefab.widgetProps.lat.displayName+%3D+%27Latitude%27%3B%0A++++++++++++Prefab.widgetProps.lng.displayName+%3D+%27Longitude%27%3B%0A++++++++%7D%0A++++++++break%3B%0A++++case+%27locations%27%3A%0A++++++++var+options+%3D+%5B%27%27%5D%3B%0A++++++++var+_locations+%3D+normalizeLocations%28newVal%29%3B%0A++++++++var+typeUtilsObj+%3D+Utils.getService%28%27TypeUtils%27%29%3B%0A++++++++var+columns+%3D+typeUtilsObj.getFieldsForExpr%28Prefab.bindlocations%29%3B%0A%0A++++++++function+getKeyString%28object%2C+prefix%29+%7B%0A++++++++++++_.forEach%28object%2C+function+%28val%2C+key%29+%7B%0A++++++++++++++++var+option+%3D+prefix+%3F+prefix+%2B+%27.%27+%2B+key+%3A+key%3B%0A++++++++++++++++options.push%28option%29%3B%0A++++++++++++++++if+%28_.isObject%28val%29%29+%7B%0A++++++++++++++++++++getKeyString%28val%2C+option%29%3B%0A++++++++++++++++%7D%0A++++++++++++%7D%29%0A++++++++%7D%0A++++++++if+%28columns.length+%3E+0%29+%7B%0A++++++++++++_.forEach%28columns%2C+function+%28key%29+%7B%0A++++++++++++++++options.push%28key%29%3B%0A++++++++++++%7D%29%3B%0A%0A++++++++%7D+else+if+%28_locations.length+%3E+0%29+%7B%0A++++++++++++getKeyString%28_locations%5B0%5D%2C+%27%27%29%3B%0A++++++++%7D%0A++++++++_.forEach%28%5B%27lat%27%2C+%27lng%27%2C+%27icon%27%2C+%27info%27%2C+%27shade%27%2C+%27radius%27%2C+%27address%27%2C+%27draggable%27%5D%2C+function+%28prop%29+%7B%0A++++++++++++Prefab.widgetProps%5Bprop%5D.options+%3D+options%3B%0A++++++++%7D%29%3B%0A%0A++++++++break%3B%0A++++case+%27markertype%27%3A%0A++++++++onMarkerTypeChangeInStudioMode%28newVal%29%3B%0A++++++++break%3B%0A++++%7D%0A%7D%0A%0Afunction+onMarkerTypeChangeInStudioMode%28markerType%29+%7B%0A++++if+%28markerType+%3D%3D%3D+%27Address%27%29+%7B%0A++++++++Prefab.widgetProps.address.show+%3D+true%3B%0A++++++++Prefab.widgetProps.lat.show+%3D+Prefab.widgetProps.lng.show+%3D+false%3B%0A++++%7D+else+if+%28markerType+%3D%3D%3D+%27LatLng%27%29+%7B%0A++++++++Prefab.widgetProps.address.show+%3D+false%3B%0A++++++++Prefab.widgetProps.lat.show+%3D+Prefab.widgetProps.lng.show+%3D+true%3B%0A++++%7D%0A%7D%0A%0Afunction+onLocationsChange%28mapType%2C+locations%29+%7B%0A++++if+%28mapType+%3D%3D%3D+%27Markers%27%29+%7B%0A++++++++_buildMarkersMap%28locations%29%3B%0A++++%7D+else+if+%28mapType+%3D%3D%3D+%27Heatmap%27%29+%7B%0A++++++++_buildHeatMap%28locations%29%3B%0A++++%7D+else+if+%28mapType+%3D%3D%3D+%27Route%27%29+%7B%0A++++++++_updateDirectionsMap%28%29%3B%0A++++%7D%0A%7D%0A%0Afunction+getControlPos%28val%29+%7B%0A++++val+%3D+val+%7C%7C+%27BOTTOM_RIGHT%27%3B%0A++++var+position+%3D+val.replace%28%27+%27%2C+%27_%27%29.toUpperCase%28%29%3B%0A++++return+position%3B%0A%7D%0A%0Afunction+setControlsPosition%28map%2C+key%2C+val%29+%7B%0A++++var+position+%3D+getControlPos%28val%29%3B%0A++++map%5Bkey%5D+%3D+%7B%0A++++++++position%3A+google.maps.ControlPosition%5Bposition%5D%0A++++%7D%0A++++Prefab.initMap%28%29%3B%0A%7D%0A%0A%2F*%0A+*+This+function+will+be+triggered+post+initialization+of+the+prefab.%0A+*%2F%0APrefab.onReady+%3D+function+%28%29+%7B%0A++++var+mapApiUrl+%3D+%27https%3A%2F%2Fmaps.googleapis.com%2Fmaps%2Fapi%2Fjs%3Fv%3D3%26libraries%3Dplaces%2Cvisualization%2Cdrawing%2Cgeometry%27%3B%0A%0A++++if+%28%21_.isEmpty%28Prefab.apikey%29%29+%7B%0A++++++++mapApiUrl+%2B%3D+%27%26key%3D%27+%2B+Prefab.apikey%3B%0A++++%7D%0A%0A++++if+%28%21%28typeof+google+%21%3D%3D+%22undefined%22+%26%26+google+%21%3D%3D+null+%3F+google.maps+%3A+void+0%29%29+%7B%0A++++++++jQuery.cachedScript%28mapApiUrl%29.then%28initMap%29%3B%0A++++%7D+else+if+%28%21Prefab.maps.length%29+%7B%0A++++++++Prefab.initMap%28%29%3B%0A++++%7D%0A%7D%3B%0A%0A%0Afunction+initMap%28data%2C+textStatus%2C+jqxhr%29+%7B%0A++++var+mapEle+%3D+Prefab.Widgets.mapContainer.%24element.get%280%29%2C%0A++++++++zoomPosition+%3D+getControlPos%28Prefab.zoomcontroloptions%29%2C%0A++++++++streetViewPosition+%3D+getControlPos%28Prefab.streetviewcontroloptions%29%3B%0A++++mapEle.style.height+%3D+Prefab.height%3B%0A++++var+map+%3D+new+google.maps.Map%28mapEle%2C+%7B%0A++++++++center%3A+Prefab.center+%3F+Prefab.center+%3A+defaultCenter%2C%0A++++++++zoom%3A+%28isNaN%28Prefab.zoom%29+%7C%7C+Prefab.zoom+%3C+2%29+%3F+2+%3A+Prefab.zoom%2C%0A++++++++mapTypeId%3A+Prefab.viewtype+%3F+Prefab.viewtype.toLowerCase%28%29+%3A+%27roadmap%27%2C%0A++++++++zoomControlOptions%3A+%7B%0A++++++++++++position%3A+google.maps.ControlPosition%5BzoomPosition%5D%2C%0A++++++++%7D%2C%0A++++++++streetViewControlOptions%3A+%7B%0A++++++++++++position%3A+google.maps.ControlPosition%5BstreetViewPosition%5D%2C%0A++++++++%7D%0A++++%7D%29%3B%0A%0A%0A++++Prefab.maps.push%28map%29%3B%0A%0A++++onLocationsChange%28Prefab.maptype%2C+Prefab.locations%29%3B%0A%0A++++%2F%2Fadd+event+listener+to+enable+the+spinner+when+an+operation+is+performed+on+maps%0A++++google.maps.event.addListener%28map%2C+%27bounds_changed%27%2C+function+%28%29+%7B%0A++++++++%2F%2F+toggleLoader%28true%29%3B%0A++++++++_checkMapStatus%28%29%3B%0A++++%7D%29%3B%0A%0A%0A++++%2F%2Fhide+the+spinner+when+the+map+comes+back+to+the+idle+state.%0A++++google.maps.event.addListener%28map%2C+%27idle%27%2C+function+%28%29+%7B%0A++++++++map.lastBounds+%3D+map.getBounds%28%29%3B%0A++++++++%2F%2F+toggleLoader%28false%29%3B%0A++++%7D%29%3B%0A%0A%0A++++%2F%2F+if+the+onClick+event+is+specified+then+add+a+active+click+listener+on+the+map%0A++++if+%28Prefab.onClick%29+%7B%0A++++++++google.maps.event.addListener%28map%2C+%27click%27%2C+function+%28event%29+%7B%0A++++++++++++Prefab.activeClick+%3D+%7B%0A++++++++++++++++%27latitude%27%3A+event.latLng.lat%28%29%2C%0A++++++++++++++++%27longitude%27%3A+event.latLng.lng%28%29%0A++++++++++++%7D%3B%0A%0A%0A++++++++++++if+%28Prefab.addMarkerOnClick%29+%7B%0A++++++++++++++++var+marker+%3D+new+google.maps.Marker%28%7B%0A++++++++++++++++++++position%3A+event.latLng%2C%0A++++++++++++++++++++map%3A+map%0A++++++++++++++++%7D%29%3B%0A%0A%0A++++++++++++++++map.panTo%28event.latLng%29%3B%0A%0A++++++++++++++++addMarkerEvents%28marker%2C+marker%29%3B%0A++++++++++++%7D%0A++++++++++++Prefab.onClick%28event%2C+Prefab.activeClick%29%3B%0A++++++++%7D%29%3B%0A%0A++++%7D%0A%0A++++_checkMapStatus%28%29%3B%0A++++%2F%2F+toggleLoader%28false%29%3B%0A%7D%0A%0A%2F%2Ftoggle+the+loader+visibility+based+on+the+requirement%0Afunction+toggleLoader%28visibility%29+%7B%0A++++setTimeout%28function+%28%29+%7B%0A++++++++Prefab.isMapLoading+%3D+visibility%3B%0A++++%7D%29%3B%0A%0A%7D%0A%0A%2F%2Fchecks+if+the+map+is+back+to+the+idle+state+by+comparing+the+bounds+i.e+checking+if+the+map+tiles+are+loaded%0Afunction+checkMapStatus%28%29+%7B%0A++++if+%28Prefab.maps%5B0%5D.lastBounds+%3D%3D+Prefab.maps%5B0%5D.getBounds%28%29%29+%7B%0A++++++++%2F%2F+toggleLoader%28false%29%3B%0A++++%7D+else+%7B%0A++++++++Prefab.maps%5B0%5D.lastBounds+%3D+Prefab.maps%5B0%5D.getBounds%28%29%3B%0A++++++++_checkMapStatus%28%29%3B%0A++++%7D%0A%7D%0A_checkMapStatus+%3D+_.debounce%28checkMapStatus%2C+500%29%3B%0A%0Afunction+getValueFromObj%28obj%2C+keyStr%29+%7B%0A++++if+%28%21obj+%7C%7C+%21keyStr%29+%7B%0A++++++++return%3B%0A++++%7D%0A%0A++++var+keyParts+%3D+keyStr.trim%28%29.split%28%27.%27%29%3B%0A%0A++++_.forEach%28keyParts%2C+function+%28key%29+%7B%0A++++++++if+%28_.isObject%28obj%29+%26%26+%21obj.hasOwnProperty%28key%29%29+%7B%0A++++++++++++return+undefined%3B%0A++++++++%7D%0A++++++++var+tempObj+%3D+obj%5Bkey%5D%3B%0A++++++++obj+%3D+tempObj%3B%0A++++%7D%29%3B%0A%0A++++return+obj%3B%0A%7D%0A%0Afunction+resetMap%28dataset%29+%7B%0A++++removeRouteMap%28%29%0A++++removeHeatMap%28%29%3B%0A++++if+%28Prefab.markersData.length%29+%7B%0A++++++++_.forEach%28Prefab.markersData%2C+function+%28markerObj%29+%7B%0A++++++++++++if+%28markerObj.marker%29+%7B%0A++++++++++++++++markerObj.marker.setMap%28null%29%3B%0A++++++++++++%7D%0A++++++++++++if+%28markerObj.circleOverlay%29+%7B%0A++++++++++++++++markerObj.circleOverlay.setMap%28null%29%3B%0A++++++++++++%7D%0A++++++++%7D%29%3B%0A%0A++++%7D%0A++++latSum+%3D+0%3B%0A++++lngSum+%3D+0%3B%0A++++invalidLatLngCount+%3D+0%3B%0A++++mapBounds+%3D+false%3B%0A++++Prefab.heatMapData+%3D+%5B%5D%3B%0A++++Prefab.markersData+%3D+%5B%5D%3B%0A++++Prefab.directionsData+%3D+%5B%5D%3B%0A++++Prefab.center+%3D+defaultCenter%3B%0A++++if+%28%21dataset%29+%7B%0A++++++++_refreshMap%28%29%3B%0A++++++++return+false%3B%0A++++%7D%0A++++return+true%3B%0A%7D%0A%0Afunction+refresh%28%29+%7B%0A++++if+%28%21Prefab.maps%5B0%5D%29+%7B%0A++++++++return%3B%0A++++%7D%0A++++var+map+%3D+Prefab.maps%5B0%5D%3B%0A++++%2F%2Fre-size+the+map+whenever+the+map+is+loaded+in+any+container+like+dialog%2C+tabs+or+any+hidden+elements%0A++++setTimeout%28function+%28%29+%7B%0A++++++++google.maps.event.trigger%28map%2C+%27resize%27%29%3B%0A++++++++%2F%2Fcheck+for+the+lat%2C+lng+values+if+they%27re+NaN+and+they+exist%0A++++++++if+%28Prefab.center+%26%26+%28%21%28isNaN%28Prefab.center.lat%29+%7C%7C+isNaN%28Prefab.center.lng%29%29%29%29+%7B%0A++++++++++++map.panTo%28createLatLngObject%28Prefab.center.lat%2C+Prefab.center.lng%29%29%3B%0A++++++++%7D%0A++++%7D%2C+100%29%3B%0A%7D%0A_refreshMap+%3D+_.debounce%28refresh%2C+80%29%3B%0A%0Afunction+refreshMapInContainer%28%29+%7B%0A++++if+%28%21Prefab.maps%5B0%5D%29+%7B%0A++++++++return%3B%0A++++%7D%0A++++var+map+%3D+Prefab.maps%5B0%5D%3B%0A%0A++++%2F%2Fre-size+the+map+whenever+the+map+is+loaded+in+any+container+like+dialog%2C+tabs+or+any+hidden+elements%0A++++setTimeout%28function+%28%29+%7B%0A++++++++google.maps.event.trigger%28map%2C+%27resize%27%29%3B%0A%0A++++++++%2F%2Fcheck+for+the+lat%2C+lng+values+if+they%27re+NaN+and+they+exist%0A++++++++if+%28Prefab.center+%26%26+%28%21%28isNaN%28Prefab.center.lat%29+%7C%7C+isNaN%28Prefab.center.lng%29%29%29%29+%7B%0A++++++++++++map.panTo%28createLatLngObject%28Prefab.center.lat%2C+Prefab.center.lng%29%29%3B%0A++++++++++++if+%28isNaN%28Prefab.zoom%29+%26%26+%21Prefab.firstTimeRefresh%29+%7B%0A++++++++++++++++map.fitBounds%28mapBounds%29%3B%0A++++++++++++++++Prefab.firstTimeRefresh+%3D+true%3B%0A++++++++++++%7D%0A++++++++%7D%0A++++%7D%2C+100%29%3B%0A%7D%0A%0A%2F%2Fbased+on+the+locations+binded%2C+sets+the+center+of+the+map%0Afunction+setCenter%28%29+%7B%0A++++var+len+%3D+Prefab.maptype+%3D%3D%3D+%27Markers%27+%3F+Prefab.markersData.length+%3A+Prefab.heatMapData.length%2C%0A++++++++lat+%3D+latSum+%2F+len%2C%0A++++++++lng+%3D+lngSum+%2F+len%2C%0A++++++++center+%3D+%7B%0A++++++++++++%27lat%27%3A+lat%2C%0A++++++++++++%27lng%27%3A+lng%0A++++++++%7D%3B%0A%0A%0A++++if+%28%21len%29+%7B%0A++++++++return%3B%0A++++%7D%0A++++Prefab.center+%3D+len+%3F+center+%3A+defaultCenter%3B%0A++++_refreshMap%28%29%3B%0A%7D%0A%0Afunction+prepareLatLngData%28lat%2C+lng%29+%7B%0A++++var+latLng%3B%0A++++if+%28validateLatLng%28lat%2C+lng%29%29+%7B%0A++++++++latSum+%2B%3D+Number%28lat%29%3B%0A++++++++lngSum+%2B%3D+Number%28lng%29%3B%0A++++++++latLng+%3D+createLatLngObject%28lat%2C+lng%29%3B%0A++++%7D+else+%7B%0A++++++++invalidLatLngCount%2B%2B%3B%0A++++%7D%0A++++return+latLng%3B%0A%7D%0A%0Afunction+createLatLngObject%28lat%2C+lng%29+%7B%0A++++if+%28google%29+%7B%0A++++++++return+new+google.maps.LatLng%28lat%2C+lng%29%3B%0A++++%7D%0A%7D%0A%0Afunction+validateLatLng%28lat%2C+lng%29+%7B%0A++++if+%28isNaN%28lat%29+%7C%7C+lat+%3D%3D%3D+null+%7C%7C+lat+%3D%3D%3D+%27%27+%7C%7C+%21%28-90+%3C+Number%28lat%29+%26%26+Number%28lat%29+%3C+90%29%29+%7B%0A++++++++return+false%3B%0A++++%7D%0A%0A++++if+%28isNaN%28lng%29+%7C%7C+lng+%3D%3D%3D+null+%7C%7C+lng+%3D%3D%3D+%27%27+%7C%7C+%21%28-180+%3C+Number%28lng%29+%26%26+Number%28lng%29+%3C+180%29%29+%7B%0A++++++++return+false%3B%0A++++%7D%0A++++return+true%3B%0A%7D%0A%0Afunction+normalizeLocations%28dataset%29+%7B%0A++++var+_locations%3B%0A++++if+%28_.isArray%28dataset%29%29+%7B%0A++++++++_locations+%3D+dataset%3B%0A++++%7D+else+if+%28_.isObject%28dataset%29+%26%26+_.isArray%28dataset.data%29+%26%26+%21_.isEmpty%28dataset.data%29%29+%7B%0A++++++++_locations+%3D+dataset.data%3B%0A++++%7D+else+%7B%0A++++++++_locations+%3D+dataset+%3F+%5Bdataset%5D+%3A+%5B%5D%3B%0A++++%7D%0A++++return+_locations%3B%0A%7D%0A%0Afunction+updateDirectionsMap%28%29+%7B%0A++++var+origin+%3D+Prefab.origin%2C%0A++++++++destination+%3D+Prefab.destination%2C%0A++++++++travelMode+%3D+Prefab.travelmode%2C%0A++++++++showTrafficLayer+%3D+Prefab.trafficlayer%2C%0A++++++++showTransitLayer+%3D+Prefab.transitlayer%3B%0A%0A++++if+%28_.isEmpty%28origin%29+%7C%7C+_.isEmpty%28destination%29+%7C%7C+_.isEmpty%28travelMode%29%29+%7B%0A++++++++_refreshMap%28%29%3B%0A++++++++return%3B%0A++++%7D%0A++++var+map+%3D+Prefab.maps%5B0%5D%3B%0A++++Prefab.directionsData.origin+%3D+origin%3B%0A++++Prefab.directionsData.destination+%3D+destination%3B%0A++++prepareWayPoints%28Prefab.waypoints%2C+Prefab.stopover%29%3B%0A%0A++++addRouteMap%28map%2C+origin%2C+destination%2C+travelMode%2C+Prefab.directionsData.wayPoints%2C+showTrafficLayer%2C+showTransitLayer%29%3B%0A%7D%0A_updateDirectionsMap+%3D+_.debounce%28updateDirectionsMap%2C+50%29%3B%0A%0Afunction+addOrRemoveTrafficLayer%28map%2C+isToAdd%29+%7B%0A++++if+%28isToAdd%29+%7B%0A++++++++trafficLayer+%3D+new+google.maps.TrafficLayer%28%29%3B%0A++++++++trafficLayer.setMap%28map%29%3B%0A++++%7D+else+if+%28trafficLayer%29+%7B%0A++++++++trafficLayer.setMap%28null%29%3B%0A++++++++trafficLayer+%3D+null%3B%0A++++%7D%0A%7D%0A%0Afunction+addOrRemoveTransitLayer%28map%2C+isToAdd%29+%7B%0A++++if+%28isToAdd%29+%7B%0A++++++++transitLayer+%3D+new+google.maps.TransitLayer%28%29%3B%0A++++++++transitLayer.setMap%28map%29%3B%0A++++%7D+else+if+%28transitLayer%29+%7B%0A++++++++transitLayer.setMap%28null%29%3B%0A++++++++transitLayer+%3D+null%3B%0A++++%7D%0A%7D%0A%0Afunction+prepareWayPoints%28wayPoints%2C+stopOver%29+%7B%0A++++var+nrmWayPoints+%3D+%5B%5D%3B%0A++++if+%28%21_.isArray%28wayPoints%29+%7C%7C+wayPoints.length+%3D%3D%3D+0%29+%7B%0A++++++++return+nrmWayPoints%3B%0A++++%7D%0A++++_.forEach%28wayPoints%2C+function+%28wayPoint%29+%7B%0A++++++++wayPoint.stopover+%3D+stopOver%3B%0A++++++++nrmWayPoints.push%28wayPoint%29%3B%0A++++%7D%29%3B%0A%0A%0A++++Prefab.directionsData.wayPoints+%3D+nrmWayPoints%3B%0A%7D%0A%0Afunction+addRouteMap%28map%2C+origin%2C+destination%2C+travelMode%2C+wayPoints+%3D+%5B%5D%2C+showTraffic+%3D+false%2C+showTransit+%3D+false%29+%7B%0A++++directionsService+%3D+new+google.maps.DirectionsService%28%29%3B%0A++++directionsDisplay+%3D+new+google.maps.DirectionsRenderer%28%29%3B%0A%0A++++directionsDisplay.setMap%28map%29%3B%0A%0A++++directionsService.route%28%7B%0A++++++++origin%3A+origin%2C%0A++++++++destination%3A+destination%2C%0A++++++++travelMode%3A+travelMode.toUpperCase%28%29%2C%0A++++++++waypoints%3A+wayPoints%2C%0A++++++++optimizeWaypoints%3A+true%0A%0A++++%7D%2C+function+%28response%2C+status%29+%7B%0A++++++++if+%28status+%3D%3D%3D+google.maps.DirectionsStatus.OK%29+%7B%0A++++++++++++directionsDisplay.setDirections%28response%29%3B%0A++++++++++++var+routes+%3D+response.routes%2C%0A++++++++++++++++distance+%3D+0%2C%0A++++++++++++++++duration+%3D+0%3B%0A++++++++++++%2F%2Fiterate+throughout+the+object+as+there+might+be+multiple+waypoints+and+directions+on+the+map.%0A++++++++++++_.forEach%28routes%2C+function+%28route%29+%7B%0A++++++++++++++++var+legs+%3D+route.legs%3B%0A++++++++++++++++_.forEach%28legs%2C+function+%28leg%29+%7B%0A++++++++++++++++++++distance+%2B%3D+_.get%28leg%2C+%27distance.value%27%29+%7C%7C+0%3B%0A++++++++++++++++++++duration+%2B%3D+_.get%28leg%2C+%27duration.value%27%29+%7C%7C+0%3B%0A++++++++++++++++%7D%29%3B%0A%0A++++++++++++%7D%29%3B%0A%0A%0A++++++++++++distance+%3D+distance+%3F+_.round%28distance+%2F+1000%2C+2%29+%3A+%27%27%3B%0A++++++++++++duration+%3D+duration+%3F+_.round%28duration+%2F+3600%2C+2%29+%3A+%27%27%3B%0A++++++++++++Prefab.distance+%3D+distance%3B%0A++++++++++++Prefab.duration+%3D+duration%3B%0A++++++++%7D+else+%7B%0A++++++++++++console.error%28%27Directions+request+failed+due+to+%27+%2B+status%29%3B%0A++++++++%7D%0A++++%7D%29%3B%0A%0A%0A++++addOrRemoveTrafficLayer%28map%2C+showTraffic%29%3B%0A++++addOrRemoveTransitLayer%28map%2C+showTransit%29%3B%0A%7D%0A%0Afunction+removeRouteMap%28%29+%7B%0A++++if+%28directionsDisplay%29+%7B%0A++++++++directionsDisplay.setMap%28null%29%3B%0A++++%7D%0A%7D%0A%0Afunction+buildHeatMap%28dataset%29+%7B%0A++++if+%28%21resetMap%28dataset%29%29+%7B%0A++++++++return%3B%0A++++%7D%0A%0A++++%2F%2Fif+lat+lng+properties+are+not+assigned+do+not+construct+the+heatmap+model%0A++++if+%28%21Prefab.lat+%7C%7C+%21Prefab.lng%29+%7B%0A++++++++return%3B%0A++++%7D%0A%0A++++var+_locations+%3D+normalizeLocations%28dataset%29%3B%0A%0A++++prepareHeatMapData%28_locations%29%3B%0A++++setCenter%28%29%3B%0A++++addHeatMap%28Prefab.maps%5B0%5D%2C+Prefab.heatMapData%2C+Prefab.gradient%2C+Prefab.pixeldensity%2C+Prefab.opacity%29%3B%0A%7D%0A_buildHeatMap+%3D+_.debounce%28function+%28locations%29+%7B%0A++++buildHeatMap%28locations%29%3B%0A%7D%2C+50%29%3B%0A%0Afunction+prepareHeatMapData%28locations%29+%7B%0A++++mapBounds+%3D+new+google.maps.LatLngBounds%28%29%3B%0A++++_.forEach%28locations%2C+function+%28location%29+%7B%0A++++++++if+%28location+%3D%3D%3D+null+%7C%7C+%21location%29+%7B%0A++++++++++++return%3B%0A++++++++%7D%0A%0A++++++++var+latitude+%3D+getValueFromObj%28location%2C+Prefab.lat%29%3B%0A++++++++var+longitude+%3D+getValueFromObj%28location%2C+Prefab.lng%29%3B%0A%0A++++++++var+latLng+%3D+prepareLatLngData%28latitude%2C+longitude%29%3B%0A%0A++++++++if+%28latLng%29+%7B%0A++++++++++++Prefab.heatMapData.push%28latLng%29%3B%0A++++++++++++mapBounds.extend%28latLng%29%3B%0A++++++++%7D%0A++++%7D%29%3B%0A%0A%7D%0A%0Afunction+addHeatMap%28map%2C+locations%2C+gradient%2C+radius%2C+opacity%29+%7B%0A++++var+heatMapOptions+%3D+%7B%0A++++++++data%3A+locations%0A++++%7D%3B%0A%0A%0A++++if+%28gradient+%26%26+_.isArray%28gradient%29%29+%7B%0A++++++++heatMapOptions.gradient+%3D+gradient%3B%0A++++%7D%0A++++if+%28_.isNumber%28radius%29%29+%7B%0A++++++++heatMapOptions.radius+%3D+radius%3B%0A++++%7D%0A++++if+%28_.isNumber%28opacity%29%29+%7B%0A++++++++heatMapOptions.opacity+%3D+opacity%3B%0A++++%7D%0A%0A++++heatMap+%3D+new+google.maps.visualization.HeatmapLayer%28heatMapOptions%29%3B%0A++++heatMap.setMap%28map%29%3B%0A++++if+%28isNaN%28Prefab.zoom%29+%26%26+%21Prefab.firstTimeRefresh%29+%7B%0A++++++++map.fitBounds%28mapBounds%29%3B%0A++++%7D%0A%7D%0A%0Afunction+removeHeatMap%28%29+%7B%0A++++if+%28heatMap%29+%7B%0A++++++++heatMap.setMap%28null%29%3B%0A++++%7D%0A%7D%0A%0A%2F%2Fhandles+the+property+value+changes+made+to+gradient%2Copacity%2C+pixel+density%0Afunction+handleHeatMapPropChanges%28key%2C+value%29+%7B%0A++++if+%28%21key+%26%26+heatMap%29+%7B%0A++++++++heatMap.set%28%27gradient%27%2C+heatMap.get%28%27gradient%27%29+%3F+null+%3A+Prefab.gradient%29%3B%0A++++++++heatMap.set%28%27opacity%27%2C+heatMap.get%28%27opacity%27%29+%3F+null+%3A+Prefab.opacity%29%3B%0A++++++++heatMap.set%28%27radius%27%2C+heatMap.get%28%27radius%27%29+%3F+null+%3A+Prefab.pixeldensity%29%3B%0A++++++++return%3B%0A++++%7D%0A++++if+%28%21heatMap+%7C%7C+%21value%29+%7B%0A++++++++return%3B%0A++++%7D%0A++++if+%28key+%3D%3D%3D+%27pixeldensity%27%29+%7B%0A++++++++key+%3D+%27radius%27%3B%0A++++%7D%0A++++heatMap.set%28key%2C+heatMap.get%28key%29+%3F+null+%3A+value%29%3B%0A%7D%0A%0Afunction+buildMarkersMap%28dataset%29+%7B%0A++++if+%28Prefab.maptype+%21%3D%3D+%27Markers%27%29+%7B%0A++++++++return%3B%0A++++%7D%0A%0A++++if+%28%21resetMap%28dataset%29%29+%7B%0A++++++++return%3B%0A++++%7D%0A%0A++++if+%28%21%28%28Prefab.markertype+%3D%3D%3D+%27Address%27+%26%26+Prefab.address%29+%7C%7C+%28Prefab.markertype+%3D%3D%3D+%27LatLng%27+%26%26+Prefab.lat+%26%26+Prefab.lng%29%29%29+%7B%0A++++++++return%3B%0A++++%7D%0A%0A++++var+_locations+%3D+normalizeLocations%28dataset%29%3B%0A++++prepareMarkersDataAndAddToMap%28_locations%29%3B%0A%7D%0A_buildMarkersMap+%3D+_.debounce%28function+%28locations%29+%7B%0A++++buildMarkersMap%28locations%29%3B%0A%7D%2C+50%29%3B%0A%0Afunction+getLatLngFromAddress%28address%2C+markerIdx%29+%7B%0A++++if+%28%21google+%7C%7C+%21address%29+%7B%0A++++++++return%3B%0A++++%7D%0A%0A++++var+geoCoder+%3D+new+google.maps.Geocoder%28%29%3B%0A++++if+%28%21geoCoder%29+%7B%0A++++++++console.error%28%27Geocode+library+does+not+exist%27%29%3B%0A++++++++return+false%3B%0A++++%7D%0A%0A++++return+new+Promise%28function+%28resolve%2C+reject%29+%7B%0A++++++++geoCoder.geocode%28%7B%0A++++++++++++%27address%27%3A+address%0A++++++++%7D%2C+function+%28results%2C+status%29+%7B%0A++++++++++++if+%28status+%3D%3D+google.maps.GeocoderStatus.OK%29+%7B%0A++++++++++++++++var+latitude+%3D+results%5B0%5D.geometry.location.lat%28%29%3B%0A++++++++++++++++var+longitude+%3D+results%5B0%5D.geometry.location.lng%28%29%3B%0A++++++++++++++++var+latLng+%3D+prepareLatLngData%28latitude%2C+longitude%29%3B%0A++++++++++++++++Prefab.markersData%5BmarkerIdx%5D.latLng+%3D+latLng%3B%0A++++++++++++%7D%0A++++++++++++resolve%28results%2C+status%29%3B%0A++++++++%7D%29%3B%0A%0A++++%7D%29%3B%0A%0A%7D%0A%0Afunction+prepareMarkersDataAndAddToMap%28locations%29+%7B%0A++++var+markerIdx+%3D+0%3B%0A++++var+fetchLatLngFromAddrPromises+%3D+%5B%5D%3B%0A++++var+map+%3D+Prefab.maps%5B0%5D%3B%0A++++mapBounds+%3D+new+google.maps.LatLngBounds%28%29%3B%0A%0A++++_.forEach%28locations%2C+function+%28location%2C+idx%29+%7B%0A++++++++if+%28location+%3D%3D%3D+null+%7C%7C+%21location%29+%7B%0A++++++++++++return%3B%0A++++++++%7D%0A%0A++++++++var+markerObj+%3D+%7B%0A++++++++++++icon%3A+Prefab.icon+%3F+getValueFromObj%28location%2C+Prefab.icon%29+%3A+%27%27%2C%0A++++++++++++info%3A+Prefab.info+%3F+getValueFromObj%28location%2C+Prefab.info%29+%3A+%27%27%2C%0A++++++++++++id%3A+%27marker_%27+%2B+idx%2C%0A++++++++++++markerIdx%3A+markerIdx%2C%0A++++++++++++color%3A+Prefab.shade+%3F+getValueFromObj%28location%2C+Prefab.shade%29+%3A+%27%27%2C%0A++++++++++++radius%3A+Prefab.radius+%3F+getValueFromObj%28location%2C+Prefab.radius%29+%3A+%27%27%2C%0A++++++++++++draggable%3A+Prefab.draggable+%3F+getValueFromObj%28location%2C+Prefab.draggable%29+%3A+false%2C%0A++++++++++++data%3A+location%0A++++++++%7D%3B%0A%0A%0A%0A++++++++if+%28Prefab.markertype+%3D%3D%3D+%27Address%27%29+%7B%0A++++++++++++var+addressData+%3D+Prefab.address.split%28%27+%27%29%3B%0A++++++++++++var+address+%3D+%27%27%3B%0A++++++++++++_.forEach%28addressData%2C+function+%28addrValue%2C+index%29+%7B%0A++++++++++++++++addrValue+%3D+getValueFromObj%28location%2C+addressData%5Bindex%5D%29+%2B+%27+%27%3B%0A++++++++++++++++address+%2B%3D+addrValue+%7C%7C+%27%27%3B%0A++++++++++++%7D%29%3B%0A%0A%0A++++++++++++markerObj.address+%3D+address%3B%0A%0A++++++++++++var+fetchLatLngPromise+%3D+getLatLngFromAddress%28address%2C+markerIdx%29%3B%0A++++++++++++if+%28fetchLatLngPromise%29+%7B%0A++++++++++++++++fetchLatLngFromAddrPromises.push%28fetchLatLngPromise%29%3B%0A++++++++++++%7D%0A++++++++%7D+else+%7B%0A++++++++++++var+latitude+%3D+getValueFromObj%28location%2C+Prefab.lat%29%3B%0A++++++++++++var+longitude+%3D+getValueFromObj%28location%2C+Prefab.lng%29%3B%0A++++++++++++var+latLng+%3D+prepareLatLngData%28latitude%2C+longitude%29%3B%0A++++++++++++if+%28latLng%29+%7B%0A++++++++++++++++markerObj.latLng+%3D+latLng%3B%0A++++++++++++%7D%0A++++++++%7D%0A%0A++++++++Prefab.markersData.push%28markerObj%29%3B%0A++++++++markerIdx%2B%2B%3B%0A++++%7D%29%3B%0A%0A%0A++++if+%28fetchLatLngFromAddrPromises.length%29+%7B%0A++++++++Promise.all%28fetchLatLngFromAddrPromises%29.then%28function+%28values%29+%7B%0A++++++++++++_.remove%28Prefab.markersData%2C+function+%28marker%29+%7B%0A++++++++++++++++return+%21marker.latLng%3B%0A++++++++++++%7D%29%3B%0A%0A%0A++++++++++++setCenter%28%29%3B%0A++++++++++++addMarkersToMap%28map%2C+Prefab.markersData%29%3B%0A++++++++++++if+%28%21isNaN%28Prefab.zoom%29%29+%7B%0A++++++++++++++++map.setZoom%28Prefab.zoom%29%3B%0A++++++++++++%7D%0A++++++++%7D%29%3B%0A%0A++++%7D+else+%7B%0A++++++++setCenter%28%29%3B%0A++++++++addMarkersToMap%28map%2C+Prefab.markersData%29%3B%0A++++++++if+%28%21isNaN%28Prefab.zoom%29%29+%7B%0A++++++++++++map.setZoom%28Prefab.zoom%29%3B%0A++++++++%7D%0A++++%7D%0A%7D%0A%0Afunction+addMarkersToMap%28map%2C+markersData%29+%7B%0A++++if+%28%21map+%7C%7C+%21markersData.length%29+%7B%0A++++++++return%3B%0A++++%7D%0A%0A++++_.forEach%28markersData%2C+function+%28marker%2C+idx%29+%7B%0A++++++++if+%28%21marker.latLng%29+%7B%0A++++++++++++return%3B%0A++++++++%7D%0A++++++++var+markerOptions+%3D+%7B%0A++++++++++++position%3A+marker.latLng%2C%0A++++++++++++map%3A+map%0A++++++++%7D%3B%0A%0A%0A++++++++if+%28marker.icon%29+%7B%0A++++++++++++markerOptions.icon+%3D+marker.icon%3B%0A++++++++%7D%0A%0A++++++++if+%28marker.draggable+%26%26+typeof+marker.draggable+%3D%3D%3D+%22boolean%22%29+%7B%0A++++++++++++markerOptions.draggable+%3D+marker.draggable%3B%0A++++++++%7D+else+%7B%0A++++++++++++marker.draggable+%3D+false%3B%0A++++++++%7D%0A%0A++++++++var+mapMarker+%3D+new+google.maps.Marker%28markerOptions%29%3B%0A++++++++Prefab.markersData%5Bidx%5D.marker+%3D+mapMarker%3B%0A++++++++mapBounds.extend%28mapMarker.getPosition%28%29%29%3B%0A%0A++++++++addMarkerEvents%28mapMarker%2C+marker%29%3B%0A%0A++++++++if+%28marker.radius%29+%7B%0A++++++++++++var+color+%3D+marker.color+%3F+marker.color+%3A+%27%23FF0000%27%3B%0A++++++++++++var+circleOptions+%3D+%7B%0A++++++++++++++++strokeColor%3A+color%2C%0A++++++++++++++++strokeOpacity%3A+0.8%2C%0A++++++++++++++++strokeWeight%3A+1%2C%0A++++++++++++++++fillColor%3A+color%2C%0A++++++++++++++++map%3A+map%2C%0A++++++++++++++++center%3A+marker.latLng%2C%0A++++++++++++++++radius%3A+marker.radius%0A++++++++++++%7D%3B%0A%0A%0A++++++++++++var+circleOverlay+%3D+new+google.maps.Circle%28circleOptions%29%3B%0A++++++++++++Prefab.markersData%5Bidx%5D.circleOverlay+%3D+circleOverlay%3B%0A++++++++%7D%0A++++%7D%29%3B%0A%0A++++if+%28isNaN%28Prefab.zoom%29+%26%26+%21Prefab.firstTimeRefresh%29+%7B%0A++++++++map.fitBounds%28mapBounds%29%3B%0A++++%7D%0A%7D%0A%0Afunction+addMarkerEvents%28mapMarker%2C+markerData%29+%7B%0A++++Prefab.activeMarker+%3D+markerData%3B%0A++++google.maps.event.addListener%28mapMarker%2C+%27click%27%2C+function+%28event%29+%7B%0A++++++++Prefab.showInfoWindow%28event%2C+markerData%29%3B%0A++++++++if+%28Prefab.onMarkerclick%29+%7B%0A++++++++++++Prefab.onMarkerclick%28event%2C+markerData%29%3B%0A++++++++%7D%0A++++%7D%29%3B%0A%0A%0A++++google.maps.event.addListener%28mapMarker%2C+%27mouseover%27%2C+function+%28event%29+%7B%0A++++++++if+%28Prefab.onMarkerhover%29+%7B%0A++++++++++++Prefab.onMarkerhover%28event%2C+markerData%29%3B%0A++++++++%7D%0A++++%7D%29%3B%0A%0A%0A++++if+%28markerData.draggable%29+%7B%0A++++++++Prefab.dragStartPositon+%3D+%27%27%3B%0A++++++++google.maps.event.addListener%28mapMarker%2C+%27dragstart%27%2C+function+%28event%29+%7B%0A++++++++++++Prefab.dragStartPositon+%3D+event.latLng%3B%0A++++++++%7D%29%3B%0A%0A++++++++google.maps.event.addListener%28mapMarker%2C+%27dragend%27%2C+function+%28event%29+%7B%0A++++++++++++if+%28Prefab.onMarkerdragend%29+%7B%0A++++++++++++++++markerData.startPosition+%3D+Prefab.dragStartPositon%3B%0A++++++++++++++++markerData.endPosition+%3D+event.latLng%3B%0A++++++++++++++++Prefab.onMarkerdragend%28event%2C+markerData%29%3B%0A++++++++++++%7D%0A++++++++%7D%29%0A++++%7D%0A%7D%0A%0Afunction+showInfoWindow%28event%2C+marker%29+%7B%0A++++if+%28%21marker.info+%7C%7C+%21google+%7C%7C+%21marker.latLng%29+%7B%0A++++++++return%3B%0A++++%7D%0A%0A++++if+%28infoWindow%29+%7B%0A++++++++infoWindow.close%28%29%3B%0A++++%7D%0A%0A++++var+content+%3D+%27%3Cdiv%3E%3Cp%3E%27+%2B+marker.info+%2B+%27%3C%2Fp%3E%3C%2Fdiv%3E%27%3B%0A%0A++++infoWindow+%3D+new+google.maps.InfoWindow%28%7B%0A++++++++content%3A+content%2C%0A++++++++pixelOffset%3A+new+google.maps.Size%280%2C+-30%29%2C%0A++++++++position%3A+marker.latLng%0A++++%7D%29%3B%0A%0A%0A++++infoWindow.open%28Prefab.maps%5B0%5D%29%3B%0A%7D%0A%0Afunction+clearNoIdMarker%28%29+%7B%0A++++_.forEach%28customMarkers%2C+function+%28marker%2C+index%29+%7B%0A++++++++if+%28marker%29+%7B%0A++++++++++++if+%28%21marker.%24%24id%29+%7B%0A++++++++++++++++marker.setMap%28null%29%3B%0A++++++++++++++++marker+%3D+null%3B%0A++++++++++++++++customMarkers.splice%28index%2C+1%29%3B%0A++++++++++++%7D%0A++++++++%7D%0A++++%7D%29%3B%0A%0A%7D%0A%0Afunction+addMarkerByUsingLatLng%28lat%2C+lng%2C+markerId%2C+draggable+%3D+false%29+%7B%0A++++if+%28%21Prefab.maps%5B0%5D+%26%26+%28%21Prefab.lat+%7C%7C+%21Prefab.lng%29%29+%7B%0A++++++++return%3B%0A++++%7D%0A++++if+%28%21validateLatLng%28lat%2C+lng%29%29+%7B%0A++++++++return%3B%0A++++%7D%0A++++%2F%2Fremove+the+previous+marker+only+if+the+markerId+is+not+provided%0A++++clearNoIdMarker%28%29%3B%0A++++var+latLngObj+%3D+createLatLngObject%28lat%2C+lng%29%3B%0A++++var+marker+%3D+new+google.maps.Marker%28%7B%0A++++++++%27position%27%3A+latLngObj%2C%0A++++++++%27map%27%3A+Prefab.maps%5B0%5D%2C%0A++++++++%27draggable%27%3A+draggable%2C%0A++++++++%27animation%27%3A+google.maps.Animation.DROP%0A++++%7D%29%3B%0A%0A%0A++++Prefab.maps%5B0%5D.panTo%28latLngObj%29%3B%0A++++if+%28markerId%29+%7B%0A++++++++marker.%24%24id+%3D+markerId.toString%28%29%3B%0A++++%7D%0A++++customMarkers.push%28marker%29%3B%0A%7D%0A%0Afunction+addMarkerByUsingAddress%28address%2C+markerId%2C+draggable+%3D+false%29+%7B%0A++++if+%28%21address%29+%7B%0A++++++++return%3B%0A++++%7D%0A%0A++++var+geoCoder+%3D+new+google.maps.Geocoder%28%29%3B%0A++++if+%28%21geoCoder%29+%7B%0A++++++++console.error%28%27Geocode+library+does+not+exist%27%29%3B%0A++++++++return%3B%0A++++%7D%0A++++geoCoder.geocode%28%7B%0A++++++++%27address%27%3A+address%0A++++%7D%2C+function+%28results%2C+status%29+%7B%0A++++++++if+%28status+%3D%3D+google.maps.GeocoderStatus.OK%29+%7B%0A++++++++++++var+addrLat+%3D+results%5B0%5D.geometry.location.lat%28%29%3B%0A++++++++++++var+addrLng+%3D+results%5B0%5D.geometry.location.lng%28%29%3B%0A++++++++++++addMarkerByUsingLatLng%28addrLat%2C+addrLng%2C+markerId%2C+draggable%29%3B%0A++++++++%7D+else+%7B%0A++++++++++++console.error%28%27Geocode+was+not+successful+for+the+following+reason%3A+%27+%2B+status%29%3B%0A++++++++++++return%3B%0A++++++++%7D%0A++++%7D%29%3B%0A%0A%7D%0A%0Afunction+removeMarkers%28markerArray%29+%7B+%2F%2Fremoves+all+the+markers+if+the+markerArray+is+not+passed%0A++++if+%28%21markerArray%29+%7B%0A++++++++_.forEach%28customMarkers%2C+function+%28marker%29+%7B%0A++++++++++++marker.setMap%28null%29%3B%0A++++++++++++marker+%3D+null%3B%0A++++++++%7D%29%3B%0A%0A++++++++customMarkers+%3D+%5B%5D%3B%0A++++%7D+else+%7B%0A++++++++_.forEach%28customMarkers%2C+function+%28marker%2C+index%29+%7B%0A++++++++++++if+%28marker%29+%7B%0A++++++++++++++++if+%28_.includes%28markerArray%2C+marker.%24%24id.toString%28%29%29%29+%7B%0A++++++++++++++++++++marker.setMap%28null%29%3B%0A++++++++++++++++++++marker+%3D+null%3B%0A++++++++++++++++++++customMarkers.splice%28index%2C+1%29%3B%0A++++++++++++++++%7D%0A++++++++++++%7D%0A++++++++%7D%29%3B%0A%0A++++%7D%0A%7D%0A%0A%2F%2Fremoves+the+marker+placed+based+on+marker+Id%0Afunction+removeMarker%28markerIds%29+%7B%0A++++if+%28%21markerIds%29+%7B%0A++++++++return%3B%0A++++%7D%0A++++if+%28_.isObject%28markerIds%29+%7C%7C+_.isArray%28markerIds%29%29+%7B%0A++++++++removeMarkers%28markerIds%29%3B%0A++++%7D+else+%7B%0A++++++++removeMarkers%28%5BmarkerIds%5D%29%3B%0A++++%7D%0A%7D%0A%0APrefab.initMap+%3D+initMap%3B%0APrefab.refresh+%3D+_refreshMap%3B%0APrefab.redraw+%3D+refreshMapInContainer%3B%0APrefab.markLatLng+%3D+addMarkerByUsingLatLng%3B%0APrefab.markAddress+%3D+addMarkerByUsingAddress%3B%0APrefab.removeMarker+%3D+removeMarker%3B%0APrefab.clearAllMarkers+%3D+removeMarkers%3B%0APrefab.showInfoWindow+%3D+showInfoWindow%3B%0APrefab.toggleLoader+%3D+toggleLoader%3B",
  "styles" : ".map-container+%3E+div%3Anth-child%282%29+%7B%0A++++display%3A+none%3B%0A%7D",
  "variables" : "%7B%0A++%22supportedLocale%22+%3A+%7B%0A++++%22_id%22+%3A+%22wm-wm.Variable1402640443182%22%2C%0A++++%22name%22+%3A+%22supportedLocale%22%2C%0A++++%22owner%22+%3A+%22Page%22%2C%0A++++%22category%22+%3A+%22wm.Variable%22%2C%0A++++%22dataSet%22+%3A+%7B%0A++++++%22en%22+%3A+%22English%22%0A++++%7D%2C%0A++++%22type%22+%3A+%22string%22%2C%0A++++%22isList%22+%3A+false%2C%0A++++%22saveInPhonegap%22+%3A+false%2C%0A++++%22twoWayBinding%22+%3A+false%0A++%7D%0A%7D"
}
